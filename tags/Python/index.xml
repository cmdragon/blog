<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on cmdragon's Blog</title><link>https://blog.cmdragon.cn/tags/Python/</link><description>Recent content in Python on cmdragon's Blog</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Fri, 26 Sep 2025 07:52:14 +0800</lastBuildDate><atom:link href="https://blog.cmdragon.cn/tags/Python/index.xml" rel="self" type="application/rss+xml"/><item><title>如何在FastAPI中玩转APScheduler，实现动态定时任务的魔法？</title><link>https://blog.cmdragon.cn/posts/4fb9e30bb20956319c783e21897a667a/</link><pubDate>Sat, 16 Aug 2025 01:14:26 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/4fb9e30bb20956319c783e21897a667a/</guid><description>APScheduler是Python中强大的任务调度库，支持任务持久化、多种触发方式和分布式执行。与FastAPI集成时，通过将Scheduler实例挂载到应用状态中，实现动态任务管理。核心代码展示了如何初始化调度器、创建和删除任务，并模拟API调用。最佳实践包括认证授权、并发控制和任务熔断。常见错误如JobLookupError和MaxInstancesReachedError，可通过任务检查和并发限制解决。</description></item><item><title>BackgroundTasks 还是 RabbitMQ？你的异步任务到底该选谁？</title><link>https://blog.cmdragon.cn/posts/d26fdc150ff9dd70c7482381ff4c77c4/</link><pubDate>Thu, 07 Aug 2025 07:20:32 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/d26fdc150ff9dd70c7482381ff4c77c4/</guid><description>FastAPI 的 BackgroundTasks 适用于轻量级任务，如日志记录和邮件发送，执行时间通常小于 3 秒。对于耗时任务，如图片处理和数据分析，推荐使用 RabbitMQ 结合 Celery。RabbitMQ 提供了消息持久化、任务重试和高并发处理能力，确保任务不丢失。通过 Pydantic 模型设计任务负载，生产者将任务提交到队列，消费者异步处理任务。综合案例展示了图片水印处理系统的实现，结合 BackgroundTasks 和 RabbitMQ 的优势，提升系统性能和可靠性。</description></item><item><title>FastAPI后台任务为何能让邮件发送如此丝滑？</title><link>https://blog.cmdragon.cn/posts/19241679a1852122f740391cbdc21bae/</link><pubDate>Fri, 01 Aug 2025 08:22:50 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/19241679a1852122f740391cbdc21bae/</guid><description>FastAPI通过BackgroundTasks模块实现异步后台任务处理，具有任务执行与请求处理解耦、支持依赖注入、自动处理异常等特点。实战中，通过aiosmtplib集成SMTP协议实现邮件通知功能，支持SSL加密连接和Jinja2模板引擎。日志系统采用结构化日志配置和请求日志中间件，优化建议包括使用RotatingFileHandler、接入ELK或Sentry日志系统及敏感信息过滤。常见问题涉及后台任务未执行和SMTP认证错误，解决方案包括检查路由、验证异步执行和SMTP配置。</description></item><item><title>FastAPI安全机制：从OAuth2到JWT的魔法通关秘籍</title><link>https://blog.cmdragon.cn/posts/04b73a9a5712e6b51e8c45c35f331e59/</link><pubDate>Sat, 07 Jun 2025 08:40:35 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/04b73a9a5712e6b51e8c45c35f331e59/</guid><description>FastAPI 的安全机制基于 OAuth2 规范、JWT 和依赖注入系统三大核心组件，提供了标准化的授权框架和无状态的身份验证。OAuth2 密码流通过 &lt;code&gt;CryptContext&lt;/code&gt; 进行密码哈希处理，&lt;code&gt;OAuth2PasswordBearer&lt;/code&gt; 自动提取和验证 Bearer Token，JWT 令牌包含过期时间，确保服务端无需存储会话状态。依赖注入系统通过 &lt;code&gt;Depends()&lt;/code&gt; 实现身份验证逻辑的解耦。典型请求流程包括 Token 验证、JWT 解码和用户验证，确保请求的合法性。</description></item><item><title>FastAPI权限迷宫：RBAC与多层级依赖的魔法通关秘籍</title><link>https://blog.cmdragon.cn/posts/ee5486714707d4835d4a774696dca30a/</link><pubDate>Wed, 04 Jun 2025 21:17:50 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/ee5486714707d4835d4a774696dca30a/</guid><description>FastAPI权限管理系统通过RBAC（基于角色的访问控制）实现用户与权限的解耦，核心要素包括用户、角色、权限和访问策略。系统使用OAuth2PasswordBearer进行认证，并通过依赖项工厂函数实现权限检查。权限依赖项支持多层级组合，允许组合多个权限检查或创建组合验证函数。常见报错包括HTTP 403 Forbidden和HTTP 401 Unauthorized，建议通过中间件和单元测试进行预防和验证。开发环境配置简单，使用FastAPI、Pydantic和Uvicorn即可快速搭建系统。</description></item><item><title>数据库事务回滚：FastAPI中的存档与读档大法</title><link>https://blog.cmdragon.cn/posts/61f400974ef7e1af22b578822f89237c/</link><pubDate>Sat, 10 May 2025 00:18:52 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/61f400974ef7e1af22b578822f89237c/</guid><description>事务回滚机制确保数据库操作的原子性，适用于需要保持数据一致性的场景，如银行转账。FastAPI通过SQLAlchemy的session管理实现事务控制，使用上下文管理器处理事务，确保在异常时回滚。Alembic用于数据库版本控制，生成迁移脚本并管理多环境迁移策略。综合应用案例展示了用户注册时的事务处理，包括检查用户名唯一性、创建用户及其关联记录，并在异常时回滚。课后Quiz和常见报错解决提供了实际操作中的指导和问题处理方法。</description></item><item><title>Python 与 PostgreSQL 集成：深入 psycopg2 的应用与实践</title><link>https://blog.cmdragon.cn/posts/d8496eacd21bf9342264e22050b82cb3/</link><pubDate>Tue, 04 Feb 2025 00:18:53 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/d8496eacd21bf9342264e22050b82cb3/</guid><description>PostgreSQL 作为开源关系型数据库的佼佼者，因其强大的功能与性能被广泛应用于各种项目中。而 Python 则因其简洁易用的语法、丰富的库和强大的数据处理能力，成为数据科学与Web开发领域的重要语言。在这两者的结合中，psycopg2 作为 PostgreSQL 数据库与 Python 之间的桥梁，实现了高效的数据交互。</description></item><item><title>从零开始：Django项目的创建与配置指南</title><link>https://blog.cmdragon.cn/posts/2475bf07d05f2d1a78dd47bfe9a73bd2/</link><pubDate>Thu, 02 May 2024 18:29:33 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/2475bf07d05f2d1a78dd47bfe9a73bd2/</guid><description>&lt;img src="https://api2.cmdragon.cn/upload/cmder/images/2024_05_02 18_33_49.png" title="2024_05_02 18_33_49.png" alt="2024_05_02 18_33_49.png"/&gt;
&lt;h2 id="django简介"&gt;&lt;strong&gt;Django简介：&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Django是一个开源的高级Python Web框架，由法国人Guido
Zempe于2003年创建。它以“快速开发、可维护的网站”为目标，提供了许多内置的功能，如ORM（对象关系映射）、URL路由、模板系统、管理后台等，让开发者能够专注于业务逻辑，而无需从头开始构建网站的底层结构。&lt;/p&gt;</description></item><item><title>Python多线程编程深度探索：从入门到实战</title><link>https://blog.cmdragon.cn/posts/8d7b4344fdbb3d86c53804ac8f3b6fb6/</link><pubDate>Sun, 28 Apr 2024 18:57:17 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/8d7b4344fdbb3d86c53804ac8f3b6fb6/</guid><description>&lt;img src="https://api2.cmdragon.cn/upload/cmder/images/2024_04_28 19_06_58.png" title="2024_04_28 19_06_58.png" alt="2024_04_28 19_06_58.png"/&gt;
&lt;h2 id="第1章python基础知识与多线程概念"&gt;&lt;strong&gt;第1章：Python基础知识与多线程概念&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="python简介"&gt;&lt;strong&gt;Python简介：&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Python是一种高级、通用、解释型的编程语言，由Guido van
Rossum于1991年创建。Python以其简洁、易读的语法而闻名，被广泛用于Web开发、数据科学、人工智能等领域。Python具有丰富的标准库和第三方库，支持多种编程范式，包括面向对象、函数式和过程式编程。&lt;/p&gt;</description></item><item><title>深入理解Python协程：从基础到实战</title><link>https://blog.cmdragon.cn/posts/5d1545ed32733a56b5e71c7ee880a847/</link><pubDate>Sat, 27 Apr 2024 16:48:43 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/5d1545ed32733a56b5e71c7ee880a847/</guid><description>&lt;img src="https://api2.cmdragon.cn/upload/cmder/images/2024_04_27 17_03_18.png" title="2024_04_27 17_03_18.png" alt="2024_04_27 17_03_18.png"/&gt;
&lt;img src="https://api2.cmdragon.cn/upload/cmder/images/2024_04_27 17_05_32.png" title="2024_04_27 17_05_32.png" alt="2024_04_27 17_05_32.png"/&gt;
&lt;h2 id="第1章协程基础"&gt;&lt;strong&gt;第1章：协程基础&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="11-协程概念介绍"&gt;&lt;strong&gt;1.1 协程概念介绍&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;协程（Coroutines）是一种特殊的软件构造，它允许程序在执行过程中暂停并恢复执行，而不会丢失当前的执行上下文。与线程和进程不同，协程在单个线程中运行，通过调度机制实现并发，降低了上下文切换的开销，提高了程序的执行效率。协程通常用于处理I/O密集型任务，如网络请求、文件读写等。&lt;/p&gt;</description></item></channel></rss>