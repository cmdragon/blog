<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>查询优化 on cmdragon's Blog</title><link>https://blog.cmdragon.cn/tags/%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/</link><description>Recent content in 查询优化 on cmdragon's Blog</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Thu, 23 Oct 2025 03:20:31 +0800</lastBuildDate><atom:link href="https://blog.cmdragon.cn/tags/%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/index.xml" rel="self" type="application/rss+xml"/><item><title>想让PostgreSQL查询快到飞起？分区表、物化视图、并行查询这三招灵不灵？</title><link>https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/</link><pubDate>Thu, 23 Oct 2025 03:20:31 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/</guid><description>分区表通过将大表拆分为小表，优化查询性能、数据维护和存储分层。PostgreSQL支持范围、列表和哈希分区。声明式分区步骤包括创建分区表、分区、索引及验证数据路由。分区维护涉及添加、删除和detach分区。分区剪枝自动跳过无关分区，提升查询效率。物化视图通过存储查询结果加速查询，需手动刷新。并行查询利用多CPU加速大表扫描、聚合和连接，但需函数并行安全。常见报错包括无匹配分区、并发刷新需唯一索引及并行查询未生效。</description></item><item><title>PostgreSQL连接的那些弯弯绕：笛卡尔积、外连接和LATERAL你都理明白没？</title><link>https://blog.cmdragon.cn/posts/0b86f22d9b99fabd6a798d05d5561d7a/</link><pubDate>Wed, 22 Oct 2025 09:24:06 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/0b86f22d9b99fabd6a798d05d5561d7a/</guid><description>PostgreSQL支持多种连接类型，包括交叉连接（CROSS JOIN）、内连接（INNER JOIN）和外连接（LEFT/RIGHT/FULL OUTER JOIN）。交叉连接生成笛卡尔积，内连接仅保留匹配行，外连接保留未匹配行并用NULL填充。USING和NATURAL JOIN可简化连接条件。连接顺序影响性能，建议优先连接小结果集的表。LATERAL子查询允许动态引用前面表的列。PostgreSQL根据表大小、索引和连接条件自动选择连接算法，如嵌套循环、哈希连接和排序合并连接。优化技巧包括避免不必要的外连接、提前过滤数据和避免笛卡尔积。</description></item><item><title>PostgreSQL全表扫描慢到崩溃？建索引+改查询+更统计信息三招能破？</title><link>https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/</link><pubDate>Mon, 20 Oct 2025 03:15:06 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/</guid><description>全表扫描在PostgreSQL中会逐行读取表数据，适用于小表，但对大表会导致性能问题。查询规划器通过生成候选计划、计算代价并选择最优执行计划来优化查询。避免全表扫描的核心是为关键列创建索引，如WHERE子句、JOIN条件和排序/分组列。查询语句应避免前缀通配符、列函数和隐式类型转换，使用显式JOIN。统计信息的准确性对规划器决策至关重要，可通过ANALYZE命令手动更新或调整autovacuum参数自动更新。</description></item><item><title>复杂查询总拖后腿？PostgreSQL多列索引+覆盖索引的神仙技巧你get没？</title><link>https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/</link><pubDate>Sun, 19 Oct 2025 06:46:34 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/</guid><description>多列索引在PostgreSQL中用于优化包含多列条件的查询，支持B-tree、GiST、GIN和BRIN四种索引类型。B-tree索引遵循左前缀原则，适合等值或等值+范围查询；GiST索引首列选择性影响效率，适合空间数据；GIN索引无左前缀限制，适合多值类型查询；BRIN索引适合大表范围查询。覆盖索引通过&lt;code&gt;INCLUDE&lt;/code&gt;子句包含查询所需列，避免回表，提升查询效率。最佳实践包括优先使用&lt;code&gt;INCLUDE&lt;/code&gt;、避免冗余列和注意可见性映射。</description></item><item><title>PostgreSQL索引选B-Tree还是GiST？“瑞士军刀”和“多面手”的差别你居然还不知道？</title><link>https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/</link><pubDate>Wed, 08 Oct 2025 01:54:08 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/</guid><description>索引是PostgreSQL中优化查询性能的核心工具，本质是表数据的“快速查找目录”，减少磁盘IO次数。B-Tree是默认索引类型，适用于等值查询、范围查询和排序，结构为自平衡树，查询时间稳定。GiST是高级索引类型，支持复杂数据类型和查询场景，如空间数据查询和全文搜索。选择索引时需结合查询需求、数据类型和维护成本，B-Tree适合常规查询，GiST适合复杂查询。</description></item><item><title>想知道数据库怎么给查询“算成本选路线”？EXPLAIN能帮你看明白？</title><link>https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/</link><pubDate>Tue, 07 Oct 2025 06:47:24 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/</guid><description>EXPLAIN工具用于展示PostgreSQL查询优化器的执行计划，帮助理解查询的执行方式和优化路径。&lt;code&gt;EXPLAIN&lt;/code&gt;仅生成估计计划，而&lt;code&gt;EXPLAIN ANALYZE&lt;/code&gt;会执行查询并提供实际数据。查询计划以树状结构呈现，包含节点类型（如&lt;code&gt;Seq Scan&lt;/code&gt;、&lt;code&gt;Index Scan&lt;/code&gt;）和关键列（如&lt;code&gt;Cost&lt;/code&gt;、&lt;code&gt;Rows&lt;/code&gt;）。&lt;code&gt;Cost&lt;/code&gt;是优化器的相对成本，基于I/O和CPU成本计算。通过分析计划，可以优化查询，如添加索引、选择合适的Join类型或避免不必要的排序。</description></item><item><title>PostgreSQL处理SQL居然像做蛋糕？解析到执行的4步里藏着多少查询优化的小心机？</title><link>https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/</link><pubDate>Mon, 06 Oct 2025 02:30:02 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/</guid><description>PostgreSQL处理SQL查询的过程分为解析、重写、规划和执行四个阶段。解析阶段将SQL字符串转换为解析树，重写阶段处理视图和规则，规划阶段选择最优执行计划，执行阶段按计划执行查询。代价模型通过计算IO和CPU成本来优化查询，统计信息影响成本计算的准确性。使用索引、选择合适的连接方式和提前过滤数据是优化查询的关键。定期更新统计信息和合理使用索引可避免性能下降。</description></item><item><title>PostgreSQL索引这么玩，才能让你的查询真的“飞”起来？</title><link>https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/</link><pubDate>Tue, 30 Sep 2025 09:01:26 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/</guid><description>PostgreSQL索引是提升查询效率的关键工具，类似于书籍目录，帮助快速定位数据。常用索引类型包括B-Tree（默认，适用于等值、范围查询和排序）、Hash（仅等值查询）、GIN（多值类型如数组和JSONB）和BRIN（超大型表）。多列索引需注意列顺序，唯一索引确保数据唯一性，部分索引仅对特定条件数据有效。覆盖索引支持仅索引扫描，避免访问表堆数据。使用EXPLAIN命令检查索引使用情况，确保查询优化。</description></item><item><title>解锁FastAPI与MongoDB聚合管道的性能奥秘</title><link>https://blog.cmdragon.cn/posts/4758340c2a266ca0e12a35ca53dd0d19/</link><pubDate>Tue, 20 May 2025 20:24:47 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/4758340c2a266ca0e12a35ca53dd0d19/</guid><description>MongoDB聚合管道是一种分阶段处理数据的流水线，通过$match、$group等阶段对文档进行特定操作，具有内存优化和原生操作的优势。聚合查询常用阶段包括$match、$group、$project等，适用于订单分析等场景。优化策略包括遵循ESR原则创建索引、使用$facet实现高效分页。常见错误如内存限制和游标配置问题，可通过添加&lt;code&gt;allowDiskUse=True&lt;/code&gt;和正确处理游标解决。进阶技巧包括使用$expr实现复杂逻辑、日期处理和条件投影。</description></item><item><title>查询优化：提升数据库性能的实用技巧</title><link>https://blog.cmdragon.cn/posts/c2b225e3d0b1e9de613fde47b1d4cacb/</link><pubDate>Fri, 14 Feb 2025 00:18:53 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/c2b225e3d0b1e9de613fde47b1d4cacb/</guid><description>在现代数据库环境中，查询性能直接影响到应用程序的响应速度和用户体验。查询优化的三个重要方面：执行计划分析、常见的性能瓶颈及其解决方案，以及数据库性能监控工具的有效使用（如 EXPLAIN 和 SQL Profiler）</description></item><item><title>数据库查询优化：提升性能的关键实践</title><link>https://blog.cmdragon.cn/posts/b87998b03d2638a19ecf589691b6f0ae/</link><pubDate>Thu, 30 Jan 2025 00:18:53 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/b87998b03d2638a19ecf589691b6f0ae/</guid><description>在当今数据驱动的商业环境中，数据库的性能直接影响着应用程序的响应速度和用户体验。查询优化是性能调优的重要组成部分，通过对 SQL 查询的分析与改进，减少查询执行时间和资源消耗，从而提升整体系统效率。</description></item><item><title>深入探讨数据库索引类型：B-tree、Hash、GIN与GiST的对比与应用</title><link>https://blog.cmdragon.cn/posts/0095ca05c7ea7fbeec5f3a9990bd5264/</link><pubDate>Sun, 26 Jan 2025 00:18:53 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/0095ca05c7ea7fbeec5f3a9990bd5264/</guid><description>在现代数据库管理系统中，索引技术是提高查询性能的重要手段。当数据量不断增长时，如何快速、有效地访问这些数据成为了数据库设计的核心问题。索引的使用能够显著减少数据检索的时间，提高应用的响应速度。通过不同的索引类型，数据库管理员能够针对特定的查询模式，选择最合适的结构以优化性能</description></item><item><title>深入探讨索引的创建与删除：提升数据库查询效率的关键技术</title><link>https://blog.cmdragon.cn/posts/750d8f8dfb99e5c3c64775aaac628668/</link><pubDate>Sat, 25 Jan 2025 00:18:53 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/750d8f8dfb99e5c3c64775aaac628668/</guid><description>在数据量猛增的今天，如何有效地从庞大的数据库中快速获取所需信息，已成为数据库管理的一个重要课题。索引作为一种有效的数据结构，能够大幅度提高查询效率，使得数据库操作更加高效。因此，理解索引的创建与删除，以及如何在合适的场景下使用它们，是每个数据库开发人员和管理员必须掌握的技能。</description></item><item><title>数据库性能优化</title><link>https://blog.cmdragon.cn/posts/d988cbeacdae71a7e16e34c4db5bd1ff/</link><pubDate>Wed, 18 Dec 2024 00:18:53 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/d988cbeacdae71a7e16e34c4db5bd1ff/</guid><description>数据库性能优化是确保数据库高效、高速响应用户请求的关键过程。通过有效的设计、合理使用索引、优化查询和系统配置，数据库管理者可以显著提升系统的响应时间和处理能力。</description></item><item><title>子查询与嵌套查询</title><link>https://blog.cmdragon.cn/posts/bcd3e0ebc574b81d52115c1ed465430e/</link><pubDate>Fri, 13 Dec 2024 00:18:53 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/bcd3e0ebc574b81d52115c1ed465430e/</guid><description>子查询和嵌套查询是关系型数据库中强大的查询工具，允许用户在一个查询的结果中再进行查询。通过使用子查询，用户能够简化复杂的SQL语句，增强查询的灵活性和可读性。本节将探讨子查询的基本概念、使用场景，以及如何有效地在 SQL 中构建嵌套查询，从而帮助读者处理复杂的数据检索任务。</description></item></channel></rss>