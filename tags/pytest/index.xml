<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Pytest on cmdragon's Blog</title><link>https://blog.cmdragon.cn/tags/pytest/</link><description>Recent content in Pytest on cmdragon's Blog</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Sat, 30 Aug 2025 02:32:06 +0800</lastBuildDate><atom:link href="https://blog.cmdragon.cn/tags/pytest/index.xml" rel="self" type="application/rss+xml"/><item><title>FastAPI测试环境配置的秘诀，你真的掌握了吗？</title><link>https://blog.cmdragon.cn/posts/6f9e71e8313db6de8c1431877a70b67e/</link><pubDate>Sat, 30 Aug 2025 02:32:06 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/6f9e71e8313db6de8c1431877a70b67e/</guid><description>&lt;img src="https://api2.cmdragon.cn/upload/cmder/20250304_012821924.jpg" title="cmdragon_cn.png" alt="cmdragon_cn.png"/&gt;
&lt;p&gt;扫描&lt;a href="https://api2.cmdragon.cn/upload/cmder/20250304_012821924.jpg"&gt;二维码&lt;/a&gt;
关注或者微信搜一搜：&lt;code&gt;编程智域 前端至全栈交流与成长&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://tools.cmdragon.cn/zh/apps?category=ai_chat"&gt;发现1000+提升效率与开发的AI工具和实用程序&lt;/a&gt;：https://tools.cmdragon.cn/&lt;/p&gt;
&lt;h2 id="1-fastapi-测试环境配置与基础框架搭建"&gt;1. FastAPI 测试环境配置与基础框架搭建&lt;/h2&gt;
&lt;h3 id="11-测试环境配置要点"&gt;1.1 测试环境配置要点&lt;/h3&gt;
&lt;p&gt;在 FastAPI 项目中配置测试环境需关注：&lt;/p&gt;</description></item><item><title>FastAPI依赖覆盖与测试环境模拟</title><link>https://blog.cmdragon.cn/posts/8a2bd816fabac0bc10bd2cf8494e4631/</link><pubDate>Thu, 10 Apr 2025 00:58:09 +0800</pubDate><guid>https://blog.cmdragon.cn/posts/8a2bd816fabac0bc10bd2cf8494e4631/</guid><description>FastAPI的依赖覆盖机制通过重写依赖项实现运行环境切换，适用于隔离测试和模拟特定场景。依赖项存储在&lt;code&gt;dependency_overrides&lt;/code&gt;字典中，优先检查覆盖字典，使用&lt;code&gt;@app.dependency_overrides&lt;/code&gt;装饰器进行临时替换，测试完成后自动恢复。通过pytest搭建测试环境，覆盖数据库依赖，使用&lt;code&gt;TestClient&lt;/code&gt;进行测试。多场景模拟测试案例包括用户权限验证和第三方API模拟，分层测试策略涵盖单元测试、集成测试和E2E测试。最佳实践包括使用pytest参数化进行多场景测试，确保测试覆盖率统计包含依赖注入代码。常见报错如&lt;code&gt;DependencyOverrideNotFound&lt;/code&gt;和&lt;code&gt;TestClient响应验证失败&lt;/code&gt;，可通过检查依赖项定义、模拟数据格式和类型注解解决。</description></item></channel></rss>